cmake_minimum_required (VERSION 3.5)

include (ExternalProject)

set (FLATBUFFERS_EXTERNAL_PROJECT flatbuffers-git)

ExternalProject_Add (${FLATBUFFERS_EXTERNAL_PROJECT}
    GIT_REPOSITORY "https://github.com/google/flatbuffers.git"
    GIT_TAG "master"
    BUILD_IN_SOURCE 1
    UPDATE_COMMAND ""
    CMAKE_GENERATOR "Unix Makefiles"
    BUILD_COMMAND "make"
    INSTALL_COMMAND ""
)

set (FLATBUFFERS_EXTERNAL_PROJECT ${FLATBUFFERS_EXTERNAL_PROJECT} PARENT_SCOPE)
set (FLATBUFFERS_INCLUDE_DIR ${CMAKE_CURRENT_BINARY_DIR}/${FLATBUFFERS_EXTERNAL_PROJECT}-prefix/src/${FLATBUFFERS_EXTERNAL_PROJECT}/include PARENT_SCOPE)
set (FLATBUFFERS_LINK_DIR ${CMAKE_CURRENT_BINARY_DIR}/${FLATBUFFERS_EXTERNAL_PROJECT}-prefix/src/${FLATBUFFERS_EXTERNAL_PROJECT}/include PARENT_SCOPE)
set (FLATBUFFERS_FLATC_EXECUTABLE ${CMAKE_CURRENT_BINARY_DIR}/${FLATBUFFERS_EXTERNAL_PROJECT}-prefix/src/${FLATBUFFERS_EXTERNAL_PROJECT}/flatc PARENT_SCOPE)
