cmake_minimum_required (VERSION 3.5)

include (ExternalProject)

set (CZMQ_EXTERNAL_PROJECT czmq-git)
set (CZMQ_SOURCE_DIR ${CMAKE_CURRENT_BINARY_DIR}/${CZMQ_EXTERNAL_PROJECT}-prefix/src/${CZMQ_EXTERNAL_PROJECT})

ExternalProject_Add (${CZMQ_EXTERNAL_PROJECT}
    GIT_REPOSITORY "https://github.com/zeromq/czmq.git"
    GIT_TAG "master"
    BUILD_IN_SOURCE 1
    UPDATE_COMMAND ""
    CONFIGURE_COMMAND libzmq_LIBS=${ZEROMQ_LINK_DIRS} ./autogen.sh && ./configure
    BUILD_COMMAND make
    INSTALL_COMMAND ""
)

set (CZMQ_EXTERNAL_PROJECT ${WANGLE_EXTERNAL_PROJECT} PARENT_SCOPE)

set (CZMQ_INCLUDE_DIRS ${CMAKE_CURRENT_BINARY_DIR}/${CZMQ_EXTERNAL_PROJECT}-prefix/src/${CZMQ_EXTERNAL_PROJECT}/include PARENT_SCOPE)
set (CZMQ_LINK_DIRS ${CMAKE_CURRENT_BINARY_DIR}/${CZMQ_EXTERNAL_PROJECT}-prefix/src/${CZMQ_EXTERNAL_PROJECT}/src/.libs PARENT_SCOPE)
